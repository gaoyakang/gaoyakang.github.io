
<!DOCTYPE html>
<html lang="en" class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vue全家桶基础总结 - GYK</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="node,"> 
    <meta name="description" content="Lonely&#39;s blog,BOTTOM


vue全家桶知识记录,只做记录不深入原理。

官网都有为什么还要再写一遍？为了熟悉语法并且每个知识点尽量用一个简单例子说明用法
1.vue基础知识1.1钩子一个实例从创建到销毁，在,"> 
    <meta name="author" content="kk"> 
    <link rel="alternative" href="atom.xml" title="GYK" type="application/atom+xml"> 
    
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">GYK</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="https://gaoyakang.github.io"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">Vue全家桶基础总结</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">Vue全家桶基础总结</h1>
        <div class="stuff">
            <span>十二月 26, 2018</span>
            

        </div>
        <div class="content markdown">
            <div style="text-align:center;margin:30px;font-size:20px;border-radius:5px;border:3px solid #eee; cursor:pointer;" onclick="javascript:window.scrollTo(0, document.body.clientHeight)">BOTTOM</div>

<blockquote>
<p>vue全家桶知识记录,只做记录不深入原理。</p>
</blockquote>
<p><code>官网都有为什么还要再写一遍？</code><br><code>为了熟悉语法并且每个知识点尽量用一个简单例子说明用法</code></p>
<h1 id="1-vue基础知识"><a href="#1-vue基础知识" class="headerlink" title="1.vue基础知识"></a>1.vue基础知识</h1><h2 id="1-1钩子"><a href="#1-1钩子" class="headerlink" title="1.1钩子"></a>1.1钩子</h2><p><code>一个实例从创建到销毁，在每个特定的时间都会自动触发某个函数，这种函数就叫做生命周期函数，也叫钩子，vue实例有哪些钩子呢？</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//组件实例刚被创建，组件属性计算之前，如data属性等</span><br><span class="line">beforeCreate</span><br><span class="line">//组件实例创建完成，属性已绑定，但DOM还未生成，$el属性还不存在</span><br><span class="line">created</span><br><span class="line">//模板编译 / 挂载之前</span><br><span class="line">beforeMount</span><br><span class="line">//模板编译 / 挂载之后</span><br><span class="line">mounted</span><br><span class="line">//组件更新之前</span><br><span class="line">beforeUpdate</span><br><span class="line">//组件更新之后</span><br><span class="line">updated</span><br><span class="line">//组件被激活时调用</span><br><span class="line">activated</span><br><span class="line">//组件被移除时调用</span><br><span class="line">deactivated</span><br><span class="line">//组件销毁前调用</span><br><span class="line">beforeDestory</span><br><span class="line">//组件销毁后调用</span><br><span class="line">destoryed</span><br></pre></td></tr></table></figure>

<p><code>每个钩子的触发时间是什么？网上找了个图：</code></p>
<p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="gouzi"></p>
<p><code>写点代码测试一下：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;index&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			data:&#123;</span><br><span class="line">				msg:&apos;hello&apos;</span><br><span class="line">			&#125;,</span><br><span class="line">			beforeCreate()&#123;</span><br><span class="line">      console.group(&apos;beforeCreate 创建前状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot; , &quot;el     : &quot; + this.$el); //undefined</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data); //undefined</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message)</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      console.group(&apos;created 创建完毕状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el     : &quot; + this.$el); //undefined</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data); //已被初始化</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); //已被初始化</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeMount() &#123;</span><br><span class="line">      console.group(&apos;beforeMount 挂载前状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el     : &quot; + (this.$el)); //已被初始化</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data); //已被初始化</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); //已被初始化</span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">      console.group(&apos;mounted 挂载结束状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el     : &quot; + this.$el); //已被初始化</span><br><span class="line">      console.log(this.$el);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data); //已被初始化</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message); //已被初始化</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeUpdate() &#123;</span><br><span class="line">      console.group(&apos;beforeUpdate 更新前状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el     : &quot; + this.$el);</span><br><span class="line">      console.log(this.$el);</span><br><span class="line">      console.log(&apos;真实dom结构：&apos; + document.getElementById(&apos;app&apos;).innerHTML);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message);</span><br><span class="line">    &#125;,</span><br><span class="line">    updated() &#123;</span><br><span class="line">      console.group(&apos;updated 更新完成状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el     : &quot; + this.$el);</span><br><span class="line">      console.log(this.$el);</span><br><span class="line">      console.log(&apos;真实dom结构：&apos; + document.getElementById(&apos;app&apos;).innerHTML);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message);</span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">      console.group(&apos;beforeDestroy 销毁前状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el     : &quot; + this.$el);</span><br><span class="line">      console.log(this.$el);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message);</span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed() &#123;</span><br><span class="line">      console.group(&apos;destroyed 销毁完成状态 ------------&gt;&apos;);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;el     : &quot; + this.$el);</span><br><span class="line">      console.log(this.$el);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;data   : &quot; + this.$data);</span><br><span class="line">      console.log(&quot;%c%s&quot;, &quot;color:red&quot;,&quot;message: &quot; + this.message)</span><br><span class="line">    &#125;</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://m.qpic.cn/psb?/V11lyZSe37bh9p/h07KZnNoaMsUZ*WD**QOyke*pQs.fJf1Vf596N3FuKs!/b/dFQBAAAAAAAA&bo=VgUqAgAAAAADF0k!&rf=viewer_4&t=5" alt="gouzz"></p>
<h2 id="1-2组件"><a href="#1-2组件" class="headerlink" title="1.2组件"></a>1.2组件</h2><p><code>在官网，vue组件的知识比较分散，这里把它集合起来，包括组件基础，组件传值，动态/异步组件，首先是组件基础，组件可以分为局部组件和全局组件，，具体写法如下：</code></p>
<h3 id="1-2-1全局组件"><a href="#1-2-1全局组件" class="headerlink" title="1.2.1全局组件"></a>1.2.1全局组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//全局组件</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;index&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;button-counter&gt;&lt;/button-counter&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">	Vue.component(&apos;button-counter&apos;,&#123;</span><br><span class="line">		template:`&lt;button @click=&quot;count++&quot;&gt;You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;`,</span><br><span class="line">		data:function()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				count:0</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">   var app = new Vue(&#123;</span><br><span class="line">    	el:&apos;#app&apos;</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><code>全局注册的行为必须在根 Vue 实例 ，模板template中只能有一个根元素</code></p>
<h3 id="1-2-2局部组件"><a href="#1-2-2局部组件" class="headerlink" title="1.2.2局部组件"></a>1.2.2局部组件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">//局部组件</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;index&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;button-counter&gt;&lt;/button-counter&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">	var buttonCounter = &#123;</span><br><span class="line">		template:`&lt;button @click=&quot;count++&quot;&gt;You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;`,</span><br><span class="line">		data:function()&#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				count:0</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			components:&#123;</span><br><span class="line">				buttonCounter</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-3父子组件传值"><a href="#1-2-3父子组件传值" class="headerlink" title="1.2.3父子组件传值"></a>1.2.3父子组件传值</h3><p><code>接着是组件传值，分成父子组件传值，子父组件传值，同级组件传值和复杂组件传值，首先来看父子组件传值：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;index&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;info :msg=&quot;msg&quot;&gt;&lt;/info&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		Vue.component(&apos;info&apos;,&#123;</span><br><span class="line">			template:`&lt;div&gt;&#123;&#123;this.msg&#125;&#125;&lt;/div&gt;`,</span><br><span class="line">			props:[&apos;msg&apos;]</span><br><span class="line">		&#125;)</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			data:&#123;</span><br><span class="line">				msg:&apos;I am from father component&apos;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-4子父组件传值"><a href="#1-2-4子父组件传值" class="headerlink" title="1.2.4子父组件传值"></a>1.2.4子父组件传值</h3><p><code>接着是子父组件传值：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;index&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;info @child=&quot;accept&quot;&gt;&lt;/info&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		Vue.component(&apos;info&apos;,&#123;</span><br><span class="line">			template:`</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;button @click=&quot;send&quot;&gt;click&lt;/button&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			`,</span><br><span class="line">			data()&#123;</span><br><span class="line">				return&#123;</span><br><span class="line">					msg:&apos;I am from child component&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			methods:&#123;</span><br><span class="line">				send:function()&#123;</span><br><span class="line">					this.$emit(&apos;child&apos;,this.msg)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			methods:&#123;</span><br><span class="line">				accept:function(msg)&#123;</span><br><span class="line">					alert(msg)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-5同级组件传值"><a href="#1-2-5同级组件传值" class="headerlink" title="1.2.5同级组件传值"></a>1.2.5同级组件传值</h3><p><code>再来写同级传值：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;index&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;info @child=&quot;accept&quot;&gt;&lt;/info&gt;</span><br><span class="line">		&lt;msg :value=&quot;value&quot;&gt;&lt;/msg&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		Vue.component(&apos;info&apos;,&#123;</span><br><span class="line">			template:`</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&lt;button @click=&quot;send&quot;&gt;click&lt;/button&gt;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			`,</span><br><span class="line">			data()&#123;</span><br><span class="line">				return&#123;</span><br><span class="line">					msg:&apos;I am from info component&apos;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			methods:&#123;</span><br><span class="line">				send:function()&#123;</span><br><span class="line">					this.$emit(&apos;child&apos;,this.msg)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		Vue.component(&apos;msg&apos;,&#123;</span><br><span class="line">			template:`</span><br><span class="line">				&lt;div&gt;</span><br><span class="line">					&#123;&#123;this.value&#125;&#125;</span><br><span class="line">				&lt;/div&gt;</span><br><span class="line">			`,</span><br><span class="line">			props:[&apos;value&apos;]</span><br><span class="line"></span><br><span class="line">		&#125;)</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			data:&#123;</span><br><span class="line">				value:&apos;&apos;</span><br><span class="line">			&#125;,</span><br><span class="line">			methods:&#123;</span><br><span class="line">				accept:function(msg)&#123;</span><br><span class="line">					this.value = msg;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><code>至于说复杂传值是通过vuex状态管理器来实现的，这个放在后面说</code></p>
<h3 id="1-2-6动态组件"><a href="#1-2-6动态组件" class="headerlink" title="1.2.6动态组件"></a>1.2.6动态组件</h3><p><code>动态组件就是通过is属性动态的切换组件，它是为了实现让多个组件使用同一个挂载点，并动态切换,动态切换的组件是被移除掉了，如果把切换出去的组件保留在内存中，可以保留它的状态或避免重新渲染,这就需要keepalive来保存</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Vue 测试实例 - 动态组件&lt;/title&gt;</span><br><span class="line">&lt;script src=&quot;https://cdn.bootcss.com/vue/2.2.2/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">	&lt;button @click=&apos;toShow&apos;&gt;点击显示子组件&lt;/button&gt;</span><br><span class="line">	&lt;keep-alive&gt;</span><br><span class="line">	&lt;component v-bind:is=&quot;which_to_show&quot; &gt;&lt;/component&gt;</span><br><span class="line">	&lt;/keep-alive&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line"> </span><br><span class="line">var vm = new Vue(&#123;  </span><br><span class="line">        el: &apos;#app&apos;,  </span><br><span class="line">        data: &#123;  </span><br><span class="line">            which_to_show: &quot;first&quot;  </span><br><span class="line">        &#125;,  </span><br><span class="line">        methods: &#123;  </span><br><span class="line">            toShow: function () &#123;   //切换组件显示  </span><br><span class="line">                var arr = [&quot;first&quot;, &quot;second&quot;, &quot;third&quot;, &quot;&quot;];  </span><br><span class="line">                var index = arr.indexOf(this.which_to_show);  </span><br><span class="line">                if (index &lt; 2) &#123;  </span><br><span class="line">                    this.which_to_show = arr[index + 1];  </span><br><span class="line">                &#125; else &#123;  </span><br><span class="line">                    this.which_to_show = arr[0];  </span><br><span class="line">                &#125;  </span><br><span class="line">               console.log(this.$children);  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;,  </span><br><span class="line">        components: &#123;  </span><br><span class="line">            first: &#123; //第一个子组件  </span><br><span class="line">                template: &quot;&lt;div&gt;这里是子组件1&lt;/div&gt;&quot;  </span><br><span class="line">            &#125;,  </span><br><span class="line">            second: &#123; //第二个子组件  </span><br><span class="line">                template: &quot;&lt;div&gt;这里是子组件2，这里是延迟后的内容：&#123;&#123;hello&#125;&#125;&lt;/div&gt;&quot;,  </span><br><span class="line">                data: function () &#123;  </span><br><span class="line">                    return &#123;  </span><br><span class="line">                        hello: &quot;&quot;  </span><br><span class="line">                    &#125;  </span><br><span class="line">                &#125;,  </span><br><span class="line">                activated: function (done) &#123; //执行这个参数时，才会切换组件  </span><br><span class="line">                    var self = this; </span><br><span class="line">										var startTime = new Date().getTime(); // get the current time   </span><br><span class="line">										//两秒后执行</span><br><span class="line">					                    while (new Date().getTime() &lt; startTime + 2000)&#123;</span><br><span class="line">											self.hello=&apos;我是延迟后的内容&apos;;</span><br><span class="line">										&#125;</span><br><span class="line">					</span><br><span class="line">                &#125;  </span><br><span class="line">            &#125;,  </span><br><span class="line">            third: &#123; //第三个子组件  </span><br><span class="line">                template: &quot;&lt;div&gt;这里是子组件3&lt;/div&gt;&quot;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;);  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><code>初始情况下，vm.$children属性中只有一个元素（first组件），点击按钮切换后，vm.$children属性中有两个元素，再次切换后，则有三个元素（三个子组件都保留在内存中）。之后无论如何切换，将一直保持有三个元素。</code><br><img src="http://m.qpic.cn/psb?/V11lyZSe37bh9p/nD3CsbvmDFhSaYbJ1SPqfzth4drYX6gfyrtGP.peZjw!/b/dL8AAAAAAAAA&bo=UQXLAQAAAAADF6w!&rf=viewer_4&t=5" alt="ssd"></p>
<h3 id="1-2-7异步组件"><a href="#1-2-7异步组件" class="headerlink" title="1.2.7异步组件"></a>1.2.7异步组件</h3><p><code>异步组件：将应用分割成小一些的代码块,只在需要的时候才从服务器加载一个模块</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;异步组件&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;async&gt;&lt;/async&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	Vue.component(&apos;async&apos;, function (resolve, reject) &#123;</span><br><span class="line">	  setTimeout(function () &#123;</span><br><span class="line">	    resolve(&#123;</span><br><span class="line">	      template: &apos;&lt;div&gt;I am async!&lt;/div&gt;&apos;</span><br><span class="line">	    &#125;)</span><br><span class="line">	  &#125;, 1000)</span><br><span class="line">	&#125;)</span><br><span class="line">	new Vue(&#123;</span><br><span class="line">	  el: &apos;#app&apos;</span><br><span class="line">&#125;)</span><br><span class="line">	</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="http://m.qpic.cn/psb?/V11lyZSe37bh9p/6WGmiZs1ZAeiX5xVUImxQXOZ2Os1EtoxQD3vOqxYJJk!/b/dIQAAAAAAAAA&bo=gAM.AgAAAAACF4w!&rf=viewer_4&t=5" alt="ssfg"></p>
<h2 id="1-3插槽"><a href="#1-3插槽" class="headerlink" title="1.3插槽"></a>1.3插槽</h2><p><code>插槽：组件插入内容和组件内部的联通,有基本插槽，具名插槽和作用域插槽</code></p>
<h3 id="1-3-1基本插槽"><a href="#1-3-1基本插槽" class="headerlink" title="1.3.1基本插槽"></a>1.3.1基本插槽</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;插槽&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;me-component&gt;</span><br><span class="line">            &lt;h1&gt;我是header&lt;/h1&gt;  </span><br><span class="line">        &lt;/me-component&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;script &gt;</span><br><span class="line">    Vue.component(&apos;me-component&apos;, &#123;         </span><br><span class="line">        template:</span><br><span class="line">                `&lt;div&gt;</span><br><span class="line">                    &lt;p&gt;你好&lt;/p&gt;</span><br><span class="line">                    &lt;slot&gt;&lt;/slot&gt; </span><br><span class="line">                &lt;/div&gt;`</span><br><span class="line">    &#125;)</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el:&quot;#app&quot;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script &gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-2具名插槽"><a href="#1-3-2具名插槽" class="headerlink" title="1.3.2具名插槽"></a>1.3.2具名插槽</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;插槽&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">        &lt;me-component&gt;</span><br><span class="line">            &lt;h2 slot=&quot;footer&quot;&gt;插槽内容&lt;/h2&gt;</span><br><span class="line">        &lt;/me-component&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;script &gt;</span><br><span class="line">    Vue.component(&apos;me-component&apos;, &#123;         </span><br><span class="line">        template:</span><br><span class="line">                `&lt;div&gt;</span><br><span class="line">                    &lt;p&gt;模板内容&lt;/p&gt;</span><br><span class="line">                    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt; </span><br><span class="line">                &lt;/div&gt;`</span><br><span class="line">    &#125;)</span><br><span class="line">    var vm = new Vue(&#123;</span><br><span class="line">        el:&quot;#app&quot;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3作用域插槽"><a href="#1-3-3作用域插槽" class="headerlink" title="1.3.3作用域插槽"></a>1.3.3作用域插槽</h3><p><code>作用域插槽：组件擦汗日内容接收到组件内部的数据</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;作用域插槽&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">			&lt;me&gt;</span><br><span class="line">				&lt;template v-slot:default=&quot;slotProps&quot;&gt;</span><br><span class="line">					&lt;div&gt;&#123;&#123;slotProps.user.firstName&#125;&#125;&lt;/div&gt;</span><br><span class="line">				&lt;/template&gt;</span><br><span class="line">			&lt;/me&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">				Vue.component(&apos;me&apos;,&#123;</span><br><span class="line">					template:`&lt;div&gt;</span><br><span class="line">						&lt;slot :user=&quot;user&quot;&gt;hello&lt;/slot&gt;</span><br><span class="line">					&lt;/div&gt;`,</span><br><span class="line">					data()&#123;</span><br><span class="line">						return &#123;</span><br><span class="line">							user:&#123;</span><br><span class="line">								firstName:&apos;kk&apos;,</span><br><span class="line">								lastNmae:&apos;G&apos;</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">				var app = new Vue(&#123;</span><br><span class="line">					el:&apos;#app&apos;</span><br><span class="line">				&#125;)</span><br><span class="line"></span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>##1.4 过渡动画</p>
<h3 id="1-4-1过渡"><a href="#1-4-1过渡" class="headerlink" title="1.4.1过渡"></a>1.4.1过渡</h3><p><code>为状态发生改变的内容添加动态效果</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;过渡&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">			.fade-enter-active, .fade-leave-active &#123;</span><br><span class="line">				  transition: opacity .5s;</span><br><span class="line">				&#125;</span><br><span class="line">				.fade-enter, .fade-leave-to &#123;</span><br><span class="line">				  opacity: 0;</span><br><span class="line">				&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;demo&quot;&gt;</span><br><span class="line">		  &lt;button v-on:click=&quot;show = !show&quot;&gt;</span><br><span class="line">		    Toggle</span><br><span class="line">		  &lt;/button&gt;</span><br><span class="line">		  &lt;transition name=&quot;fade&quot;&gt;</span><br><span class="line">		    &lt;p v-if=&quot;show&quot;&gt;hello&lt;/p&gt;</span><br><span class="line">		  &lt;/transition&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">				new Vue(&#123;</span><br><span class="line">				  el: &apos;#demo&apos;,</span><br><span class="line">				  data: &#123;</span><br><span class="line">				    show: true</span><br><span class="line">				  &#125;</span><br><span class="line">				&#125;)</span><br><span class="line"></span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="//gaoyakang.github.io/2018/12/26/Vue全家桶基础总结/1.png" alt="kiuh"></p>
<h3 id="1-4-2css动画"><a href="#1-4-2css动画" class="headerlink" title="1.4.2css动画"></a>1.4.2css动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;过渡&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.bootcss.com/animate.css/3.7.0/animate.min.css&quot;&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">			.fade-enter-active, .fade-leave-active &#123;</span><br><span class="line">				  transition: opacity .5s;</span><br><span class="line">				&#125;</span><br><span class="line">				.fade-enter, .fade-leave-to &#123;</span><br><span class="line">				  opacity: 0;</span><br><span class="line">				&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;example-3&quot;&gt;</span><br><span class="line">		  &lt;button @click=&quot;show = !show&quot;&gt;</span><br><span class="line">		    Toggle render</span><br><span class="line">		  &lt;/button&gt;</span><br><span class="line">		  &lt;transition</span><br><span class="line">		    name=&quot;custom-classes-transition&quot;</span><br><span class="line">		    enter-active-class=&quot;animated tada&quot;</span><br><span class="line">		    leave-active-class=&quot;animated bounceOutRight&quot;</span><br><span class="line">		  &gt;</span><br><span class="line">		    &lt;p v-if=&quot;show&quot;&gt;hello&lt;/p&gt;</span><br><span class="line">		  &lt;/transition&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">				new Vue(&#123;</span><br><span class="line">				  el: &apos;#example-3&apos;,</span><br><span class="line">				  data: &#123;</span><br><span class="line">				    show: true</span><br><span class="line">				  &#125;</span><br><span class="line">				&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-3js动画"><a href="#1-4-3js动画" class="headerlink" title="1.4.3js动画"></a>1.4.3js动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;过渡&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;example-4&quot;&gt;</span><br><span class="line">		  &lt;button @click=&quot;show = !show&quot;&gt;</span><br><span class="line">		    Toggle</span><br><span class="line">		  &lt;/button&gt;</span><br><span class="line">		  &lt;transition</span><br><span class="line">		    v-on:before-enter=&quot;beforeEnter&quot;</span><br><span class="line">		    v-on:enter=&quot;enter&quot;</span><br><span class="line">		    v-on:leave=&quot;leave&quot;</span><br><span class="line">		    v-bind:css=&quot;false&quot;</span><br><span class="line">		  &gt;</span><br><span class="line">		    &lt;p v-if=&quot;show&quot;&gt;</span><br><span class="line">		      Demo</span><br><span class="line">		    &lt;/p&gt;</span><br><span class="line">		  &lt;/transition&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">				new Vue(&#123;</span><br><span class="line">					  el: &apos;#example-4&apos;,</span><br><span class="line">					  data: &#123;</span><br><span class="line">					    show: false</span><br><span class="line">					  &#125;,</span><br><span class="line">					  methods: &#123;</span><br><span class="line">					    beforeEnter: function (el) &#123;</span><br><span class="line">					      el.style.opacity = 0</span><br><span class="line">					      el.style.transformOrigin = &apos;left&apos;</span><br><span class="line">					    &#125;,</span><br><span class="line">					    enter: function (el, done) &#123;</span><br><span class="line">					      Velocity(el, &#123; opacity: 1, fontSize: &apos;1.4em&apos; &#125;, &#123; duration: 300 &#125;)</span><br><span class="line">					      Velocity(el, &#123; fontSize: &apos;1em&apos; &#125;, &#123; complete: done &#125;)</span><br><span class="line">					    &#125;,</span><br><span class="line">					    leave: function (el, done) &#123;</span><br><span class="line">					      Velocity(el, &#123; translateX: &apos;15px&apos;, rotateZ: &apos;50deg&apos; &#125;, &#123; duration: 600 &#125;)</span><br><span class="line">					      Velocity(el, &#123; rotateZ: &apos;100deg&apos; &#125;, &#123; loop: 2 &#125;)</span><br><span class="line">					      Velocity(el, &#123;</span><br><span class="line">					        rotateZ: &apos;45deg&apos;,</span><br><span class="line">					        translateY: &apos;30px&apos;,</span><br><span class="line">					        translateX: &apos;30px&apos;,</span><br><span class="line">					        opacity: 0</span><br><span class="line">					      &#125;, &#123; complete: done &#125;)</span><br><span class="line">					    &#125;</span><br><span class="line">					  &#125;</span><br><span class="line">					&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-4多组件过渡"><a href="#1-4-4多组件过渡" class="headerlink" title="1.4.4多组件过渡"></a>1.4.4多组件过渡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;过渡&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		.component-fade-enter-active, .component-fade-leave-active &#123;</span><br><span class="line">			  transition: opacity .3s ease;</span><br><span class="line">			&#125;</span><br><span class="line">			.component-fade-enter, .component-fade-leave-to &#123;</span><br><span class="line">			  opacity: 0;</span><br><span class="line">			&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;transition-components-demo&quot;&gt;</span><br><span class="line">			A:&lt;input </span><br><span class="line">					type=&quot;radio&quot; </span><br><span class="line">					:checked=&quot;aIsChecked&quot; </span><br><span class="line">					@click=&quot;handleClick&quot;</span><br><span class="line">				&gt;</span><br><span class="line">			B:&lt;input </span><br><span class="line">					type=&quot;radio&quot;</span><br><span class="line">					:checked=&quot;bIsChecked&quot;</span><br><span class="line">					@click=&quot;handleClick&quot;</span><br><span class="line">				&gt;</span><br><span class="line"></span><br><span class="line">		  &lt;transition name=&quot;component-fade&quot; mode=&quot;out-in&quot;&gt;</span><br><span class="line">			  &lt;component v-bind:is=&quot;view&quot;&gt;&lt;/component&gt;</span><br><span class="line">			&lt;/transition&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">				new Vue(&#123;</span><br><span class="line">				  el: &apos;#transition-components-demo&apos;,</span><br><span class="line">				  data: &#123;</span><br><span class="line">				    view: &apos;v-a&apos;,</span><br><span class="line">				    aIsChecked:true,</span><br><span class="line">				    bIsChecked:false</span><br><span class="line">				  &#125;,</span><br><span class="line">				  components: &#123;</span><br><span class="line">				    &apos;v-a&apos;: &#123;</span><br><span class="line">				      template: &apos;&lt;div&gt;Component A&lt;/div&gt;&apos;</span><br><span class="line">				    &#125;,</span><br><span class="line">				    &apos;v-b&apos;: &#123;</span><br><span class="line">				      template: &apos;&lt;div&gt;Component B&lt;/div&gt;&apos;</span><br><span class="line">				    &#125;</span><br><span class="line">				  &#125;,</span><br><span class="line">				  methods:&#123;</span><br><span class="line">				  	handleClick:function()&#123;</span><br><span class="line">				  			this.aIsChecked = !this.aIsChecked;</span><br><span class="line">				  			this.bIsChecked = !this.bIsChecked;</span><br><span class="line">				  			this.view = this.view === &apos;v-a&apos; ? &apos;v-b&apos; : &apos;v-a&apos;;</span><br><span class="line">				  	&#125;</span><br><span class="line">				  &#125;</span><br><span class="line">				&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-5列表过渡"><a href="#1-4-5列表过渡" class="headerlink" title="1.4.5列表过渡"></a>1.4.5列表过渡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;列表过渡&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		.list-item &#123;</span><br><span class="line">		  display: inline-block;</span><br><span class="line">		  margin-right: 10px;</span><br><span class="line">		&#125;</span><br><span class="line">		.list-enter-active, .list-leave-active &#123;</span><br><span class="line">		  transition: all 1s;</span><br><span class="line">		&#125;</span><br><span class="line">		.list-enter, .list-leave-to&#123;</span><br><span class="line">		  opacity: 0;</span><br><span class="line">		  transform: translateY(30px);</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;list-demo&quot; class=&quot;demo&quot;&gt;</span><br><span class="line">		  &lt;button v-on:click=&quot;add&quot;&gt;Add&lt;/button&gt;</span><br><span class="line">		  &lt;button v-on:click=&quot;remove&quot;&gt;Remove&lt;/button&gt;</span><br><span class="line">		  &lt;transition-group name=&quot;list&quot; tag=&quot;p&quot;&gt;</span><br><span class="line">		    &lt;span v-for=&quot;item in items&quot; v-bind:key=&quot;item&quot; class=&quot;list-item&quot;&gt;</span><br><span class="line">		      &#123;&#123; item &#125;&#125;</span><br><span class="line">		    &lt;/span&gt;</span><br><span class="line">		  &lt;/transition-group&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">				new Vue(&#123;</span><br><span class="line">				  el: &apos;#list-demo&apos;,</span><br><span class="line">				  data: &#123;</span><br><span class="line">				    items: [1,2,3,4,5,6,7,8,9],</span><br><span class="line">				    nextNum: 10</span><br><span class="line">				  &#125;,</span><br><span class="line">				  methods: &#123;</span><br><span class="line">				    randomIndex: function () &#123;</span><br><span class="line">				      return Math.floor(Math.random() * this.items.length)</span><br><span class="line">				    &#125;,</span><br><span class="line">				    add: function () &#123;</span><br><span class="line">				      this.items.splice(this.randomIndex(), 0, this.nextNum++)</span><br><span class="line">				    &#125;,</span><br><span class="line">				    remove: function () &#123;</span><br><span class="line">				      this.items.splice(this.randomIndex(), 1)</span><br><span class="line">				    &#125;,</span><br><span class="line">				  &#125;</span><br><span class="line">				&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-6状态过渡"><a href="#1-4-6状态过渡" class="headerlink" title="1.4.6状态过渡"></a>1.4.6状态过渡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;列表过渡&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.jsdelivr.net/npm/tween.js@16.3.4&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.jsdelivr.net/npm/color-js@1.0.3&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;style&gt;</span><br><span class="line">		.example-7-color-preview &#123;</span><br><span class="line">		  display: inline-block;</span><br><span class="line">		  width: 50px;</span><br><span class="line">		  height: 50px;</span><br><span class="line">		&#125;</span><br><span class="line">	&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;example-7&quot;&gt;</span><br><span class="line">		  &lt;input</span><br><span class="line">		    v-model=&quot;colorQuery&quot;</span><br><span class="line">		    v-on:keyup.enter=&quot;updateColor&quot;</span><br><span class="line">		    placeholder=&quot;Enter a color&quot;</span><br><span class="line">		  &gt;</span><br><span class="line">		  &lt;button v-on:click=&quot;updateColor&quot;&gt;Update&lt;/button&gt;</span><br><span class="line">		  &lt;p&gt;Preview:&lt;/p&gt;</span><br><span class="line">		  &lt;span</span><br><span class="line">		    v-bind:style=&quot;&#123; backgroundColor: tweenedCSSColor &#125;&quot;</span><br><span class="line">		    class=&quot;example-7-color-preview&quot;</span><br><span class="line">		  &gt;&lt;/span&gt;</span><br><span class="line">		  &lt;p&gt;&#123;&#123; tweenedCSSColor &#125;&#125;&lt;/p&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">				var Color = net.brehaut.Color</span><br><span class="line"></span><br><span class="line">				new Vue(&#123;</span><br><span class="line">				  el: &apos;#example-7&apos;,</span><br><span class="line">				  data: &#123;</span><br><span class="line">				    colorQuery: &apos;&apos;,</span><br><span class="line">				    color: &#123;</span><br><span class="line">				      red: 0,</span><br><span class="line">				      green: 0,</span><br><span class="line">				      blue: 0,</span><br><span class="line">				      alpha: 1</span><br><span class="line">				    &#125;,</span><br><span class="line">				    tweenedColor: &#123;&#125;</span><br><span class="line">				  &#125;,</span><br><span class="line">				  created: function () &#123;</span><br><span class="line">				    this.tweenedColor = Object.assign(&#123;&#125;, this.color)</span><br><span class="line">				  &#125;,</span><br><span class="line">				  watch: &#123;</span><br><span class="line">				    color: function () &#123;</span><br><span class="line">				      function animate () &#123;</span><br><span class="line">				        if (TWEEN.update()) &#123;</span><br><span class="line">				          requestAnimationFrame(animate)</span><br><span class="line">				        &#125;</span><br><span class="line">				      &#125;</span><br><span class="line"></span><br><span class="line">				      new TWEEN.Tween(this.tweenedColor)</span><br><span class="line">				        .to(this.color, 750)</span><br><span class="line">				        .start()</span><br><span class="line"></span><br><span class="line">				      animate()</span><br><span class="line">				    &#125;</span><br><span class="line">				  &#125;,</span><br><span class="line">				  computed: &#123;</span><br><span class="line">				    tweenedCSSColor: function () &#123;</span><br><span class="line">				      return new Color(&#123;</span><br><span class="line">				        red: this.tweenedColor.red,</span><br><span class="line">				        green: this.tweenedColor.green,</span><br><span class="line">				        blue: this.tweenedColor.blue,</span><br><span class="line">				        alpha: this.tweenedColor.alpha</span><br><span class="line">				      &#125;).toCSS()</span><br><span class="line">				    &#125;</span><br><span class="line">				  &#125;,</span><br><span class="line">				  methods: &#123;</span><br><span class="line">				    updateColor: function () &#123;</span><br><span class="line">				      this.color = new Color(this.colorQuery).toRGB()</span><br><span class="line">				      this.colorQuery = &apos;&apos;</span><br><span class="line">				    &#125;</span><br><span class="line">				  &#125;</span><br><span class="line">				&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="1-5-自定义指令"><a href="#1-5-自定义指令" class="headerlink" title="1.5 自定义指令"></a>1.5 自定义指令</h2><h3 id="1-5-1自定义指令参数"><a href="#1-5-1自定义指令参数" class="headerlink" title="1.5.1自定义指令参数"></a>1.5.1自定义指令参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//指令参数</span><br><span class="line">el: 指令所绑定的元素，可以用来直接操作 DOM 。</span><br><span class="line">binding: 一个对象，包含以下属性：</span><br><span class="line">    name: 指令名，不包括 v- 前缀。</span><br><span class="line">    value: 指令的绑定值， 例如： v-my-directive=&quot;1 + 1&quot;, value 的值是 2。</span><br><span class="line">    oldValue: 指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。</span><br><span class="line">    expression: 绑定值的字符串形式。 例如 v-my-directive=&quot;1 + 1&quot; ， expression 的值是 &quot;1 + 1&quot;。</span><br><span class="line">    arg: 传给指令的参数。例如 v-my-directive:foo， arg 的值是 &quot;foo&quot;。</span><br><span class="line">    modifiers: 一个包含修饰符的对象。 例如： v-my-directive.foo.bar, 修饰符对象 modifiers 的值是 &#123; foo: true, bar: true &#125;。</span><br><span class="line">vnode: Vue 编译生成的虚拟节点。</span><br><span class="line">oldVnode: 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//指令钩子</span><br><span class="line">bind: 只调用一次，指令第一次绑定到元素时调用，用这个钩子函数可以定义一个在绑定时执行一次的初始化动作。</span><br><span class="line"></span><br><span class="line">inserted: 被绑定元素插入父节点时调用（父节点存在即可调用，不必存在于 document 中）。</span><br><span class="line"></span><br><span class="line">update: 被绑定元素所在的模板更新时调用，而不论绑定值是否变化。通过比较更新前后的绑定值，可以忽略不必要的模板更新（详细的钩子函数参数见下）。</span><br><span class="line"></span><br><span class="line">componentUpdated: 被绑定元素所在模板完成一次更新周期时调用。</span><br><span class="line"></span><br><span class="line">unbind: 只调用一次， 指令与元素解绑时调用。</span><br></pre></td></tr></table></figure>

<h3 id="1-5-2自定义指令实例"><a href="#1-5-2自定义指令实例" class="headerlink" title="1.5.2自定义指令实例"></a>1.5.2自定义指令实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;列表过渡&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">			&lt;div id=&quot;hook-arguments-example&quot; v-demo:foo.a.b=&quot;message&quot;&gt;&lt;/div&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			Vue.directive(&apos;demo&apos;, &#123;</span><br><span class="line">			  bind: function (el, binding, vnode) &#123;</span><br><span class="line">			    var s = JSON.stringify</span><br><span class="line">			    el.innerHTML =</span><br><span class="line">			      &apos;name: &apos;       + s(binding.name) + &apos;&lt;br&gt;&apos; +</span><br><span class="line">			      &apos;value: &apos;      + s(binding.value) + &apos;&lt;br&gt;&apos; +</span><br><span class="line">			      &apos;expression: &apos; + s(binding.expression) + &apos;&lt;br&gt;&apos; +</span><br><span class="line">			      &apos;argument: &apos;   + s(binding.arg) + &apos;&lt;br&gt;&apos; +</span><br><span class="line">			      &apos;modifiers: &apos;  + s(binding.modifiers) + &apos;&lt;br&gt;&apos; +</span><br><span class="line">			      &apos;vnode keys: &apos; + Object.keys(vnode).join(&apos;, &apos;)</span><br><span class="line">			  &#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		new Vue(&#123;</span><br><span class="line">		  el: &apos;#hook-arguments-example&apos;,</span><br><span class="line">		  data: &#123;</span><br><span class="line">		    message: &apos;hello!&apos;</span><br><span class="line">		  &#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="1-6混入"><a href="#1-6混入" class="headerlink" title="1.6混入"></a>1.6混入</h2><p><code>混入会将公用的组件配置项与默认配置项目混合，具体看例子：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;混入&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">		&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">			&lt;mixinsComponent&gt;&lt;/mixinsComponent&gt;</span><br><span class="line">		&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">		&lt;script&gt;</span><br><span class="line">			var myMixin = &#123;</span><br><span class="line">			  created: function () &#123;</span><br><span class="line">			    this.hello()</span><br><span class="line">			  &#125;,</span><br><span class="line">			  methods: &#123;</span><br><span class="line">			    hello: function () &#123;</span><br><span class="line">			      console.log(&apos;hello from mixin!&apos;)</span><br><span class="line">			    &#125;</span><br><span class="line">			  &#125;</span><br><span class="line">			&#125;</span><br><span class="line">			// 定义一个使用混入对象的组件</span><br><span class="line">			var Component = Vue.extend(&#123;</span><br><span class="line">			  mixins: [myMixin]</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">			var mixinsComponent = new Component()</span><br><span class="line">			var app = new Vue(&#123;</span><br><span class="line">				el:&apos;#app&apos;,</span><br><span class="line">				component:&#123;</span><br><span class="line">					mixinsComponent</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="1-7渲染函数"><a href="#1-7渲染函数" class="headerlink" title="1.7渲染函数"></a>1.7渲染函数</h2><p><code>vue默认使用html的模板然后绑定在虚拟dom，但还提供了渲染函数实现更加强大的原生js使用能力</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;渲染函数&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">		&lt;test :test=&quot;1&quot;&gt;&lt;/test&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line"></span><br><span class="line">		Vue.component(&apos;test&apos;,&#123;</span><br><span class="line">			render:function(createElement)&#123;</span><br><span class="line">				return createElement(&apos;div&apos;,&#123;</span><br><span class="line">					class:&#123;</span><br><span class="line">						test:true</span><br><span class="line">					&#125;,</span><br><span class="line">					id:&#123;</span><br><span class="line">						test:true</span><br><span class="line">					&#125;,</span><br><span class="line">					style:&#123;</span><br><span class="line">						color:&apos;green&apos;</span><br><span class="line">					&#125;,</span><br><span class="line">					props:&#123;</span><br><span class="line">						test:&quot;test&quot;</span><br><span class="line">					&#125;,</span><br><span class="line">					domProps: &#123;</span><br><span class="line">					    innerHTML: &apos;hello world&apos;</span><br><span class="line">					&#125;,</span><br><span class="line">					on: &#123;</span><br><span class="line">					    click: function()&#123;</span><br><span class="line">							alert(&apos;click event&apos;)</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="1-8插件开发"><a href="#1-8插件开发" class="headerlink" title="1.8插件开发"></a>1.8插件开发</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;插件&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vue/2.6.10/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var Test = &#123;&#125;</span><br><span class="line">		Test.install = function(Vue,options)&#123;</span><br><span class="line">			Vue.globalVarible = &apos;hello world&apos;;</span><br><span class="line">			Vue.mixin(&#123;</span><br><span class="line">				mounted:function()&#123;</span><br><span class="line">					alert(this.globalVarible)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;;</span><br><span class="line">		Vue.use(Test);</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="2-vue-router基础知识"><a href="#2-vue-router基础知识" class="headerlink" title="2.vue-router基础知识"></a>2.vue-router基础知识</h1><h2 id="2-1基本路由"><a href="#2-1基本路由" class="headerlink" title="2.1基本路由"></a>2.1基本路由</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/foo&quot;&gt;Go to Foo&lt;/router-link&gt;</span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/foo&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;foo&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;index&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-2动态路由"><a href="#2-2动态路由" class="headerlink" title="2.2动态路由"></a>2.2动态路由</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/foo/one&quot;&gt;Go to Foo one&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/foo/two&quot;&gt;Go to Foo two&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/foo/:name&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;&#123;&#123;$route.params.name&#125;&#125;&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;index&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-3嵌套路由"><a href="#2-3嵌套路由" class="headerlink" title="2.3嵌套路由"></a>2.3嵌套路由</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/&quot;&gt;index&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	&lt;div&gt;index&lt;/div&gt;</span><br><span class="line">    						&lt;router-link to=&quot;bar&quot; append&gt;bar&lt;/router-link&gt;</span><br><span class="line">  							&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;,</span><br><span class="line">					children:[</span><br><span class="line">						&#123;</span><br><span class="line">							path:&apos;bar&apos;,</span><br><span class="line">							component:&#123;</span><br><span class="line">								template:`&lt;div&gt;hello&lt;/div&gt;`</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">					]</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-4编程式导航"><a href="#2-4编程式导航" class="headerlink" title="2.4编程式导航"></a>2.4编程式导航</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/&quot;&gt;index&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/list&quot;&gt;list&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/detail&quot;&gt;detail&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  		&lt;button @click=&quot;change&quot;&gt;导航&lt;/button&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	index</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/list&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	list</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/detail&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	detail</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router,</span><br><span class="line">			methods:&#123;</span><br><span class="line">				change:function()&#123;</span><br><span class="line">					setTimeout(function()&#123;</span><br><span class="line">						this.router.push(&apos;/list&apos;)</span><br><span class="line">						setTimeout(function()&#123;</span><br><span class="line">							this.router.replace(&apos;/detail&apos;)</span><br><span class="line">						&#125;,2000)</span><br><span class="line">					&#125;,2000)</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-5命名路由和视图"><a href="#2-5命名路由和视图" class="headerlink" title="2.5命名路由和视图"></a>2.5命名路由和视图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link :to=&#123;name:&apos;index&apos;&#125;&gt;index&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">  		&lt;router-view name=&quot;info&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					name:&apos;index&apos;,</span><br><span class="line">					components:&#123;</span><br><span class="line">						name:&#123;</span><br><span class="line">							template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	name</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">						&#125;,</span><br><span class="line">					info:&#123;</span><br><span class="line">							template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	info</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router,</span><br><span class="line">			methods:&#123;</span><br><span class="line">				change:function()&#123;</span><br><span class="line">					setTimeout(function()&#123;</span><br><span class="line">						this.router.push(&apos;/list&apos;)</span><br><span class="line">						setTimeout(function()&#123;</span><br><span class="line">							this.router.replace(&apos;/detail&apos;)</span><br><span class="line">						&#125;,2000)</span><br><span class="line">					&#125;,2000)</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-6重定向和别名"><a href="#2-6重定向和别名" class="headerlink" title="2.6重定向和别名"></a>2.6重定向和别名</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link :to=&#123;name:&apos;index&apos;&#125;&gt;index&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/list&quot;&gt;list&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/compute&quot;&gt;detail&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					redirect:&apos;/list&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	index</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/list&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	list</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/detail&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	detail</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;,</span><br><span class="line">					alias:&apos;/compute&apos;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router,</span><br><span class="line">			methods:&#123;</span><br><span class="line">				change:function()&#123;</span><br><span class="line">					setTimeout(function()&#123;</span><br><span class="line">						this.router.push(&apos;/list&apos;)</span><br><span class="line">						setTimeout(function()&#123;</span><br><span class="line">							this.router.replace(&apos;/detail&apos;)</span><br><span class="line">						&#125;,2000)</span><br><span class="line">					&#125;,2000)</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-7组件传值"><a href="#2-7组件传值" class="headerlink" title="2.7组件传值"></a>2.7组件传值</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/foo/one&quot;&gt;Go to Foo one&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/foo/two&quot;&gt;Go to Foo two&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/s/one&quot;&gt;Go to Foo one&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/s/two&quot;&gt;Go to Foo two&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var pageId = &#123;</span><br><span class="line">			template:`&lt;div&gt;&#123;&#123;name&#125;&#125;&lt;/div&gt;`,</span><br><span class="line">			props:[&apos;name&apos;]</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/foo/:name&apos;,</span><br><span class="line">					component:pageId,</span><br><span class="line">					props:true</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/s/:name&apos;,</span><br><span class="line">					component:pageId,</span><br><span class="line">					props:true</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;index&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-8导航守卫"><a href="#2-8导航守卫" class="headerlink" title="2.8导航守卫"></a>2.8导航守卫</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/&quot;&gt;index&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/user&quot;&gt;user&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/login&quot;&gt;login&lt;/router-link&gt;</span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;index&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/user&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;user&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/login&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;login&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line">		router.beforeEach(function(to,from,next)&#123;</span><br><span class="line">			var login = false;</span><br><span class="line">			if(!login &amp;&amp; to.path === &apos;/user&apos;)&#123;</span><br><span class="line">				next(&apos;/login&apos;)</span><br><span class="line">			&#125;else&#123;</span><br><span class="line">				next()</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-9路由元信息"><a href="#2-9路由元信息" class="headerlink" title="2.9路由元信息"></a>2.9路由元信息</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/&quot;&gt;index&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/user&quot;&gt;user&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/login&quot;&gt;login&lt;/router-link&gt;</span><br><span class="line">  		&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;index&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/user&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;user&lt;/div&gt;`</span><br><span class="line">					&#125;,</span><br><span class="line">					meta:&#123;</span><br><span class="line">						flag:true</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/login&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`&lt;div&gt;login&lt;/div&gt;`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line">		router.beforeEach(function(to,from,next)&#123;</span><br><span class="line">			var login = true;</span><br><span class="line">			if(!login &amp;&amp; to.matched.some(function(item) &#123;</span><br><span class="line">				return item.meta.flag</span><br><span class="line">			&#125;))&#123;</span><br><span class="line">				next(&apos;/login&apos;)</span><br><span class="line">			&#125;else&#123;</span><br><span class="line">				next()</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-10过渡动效"><a href="#2-10过渡动效" class="headerlink" title="2.10过渡动效"></a>2.10过渡动效</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;路由&lt;/title&gt;</span><br><span class="line">	&lt;link href=&quot;https://cdn.bootcss.com/animate.css/3.7.0/animate.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue-router/dist/vue-router.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/&quot;&gt;index&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/list&quot;&gt;list&lt;/router-link&gt;</span><br><span class="line">    	&lt;router-link to=&quot;/detail&quot;&gt;detail&lt;/router-link&gt;</span><br><span class="line">		&lt;transition :enter-active-class=&quot;effect&quot;&gt;</span><br><span class="line">  			&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  		&lt;/transition&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var router = new VueRouter(&#123;</span><br><span class="line">			routes:[</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	index</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/list&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	list</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;,</span><br><span class="line">				&#123;</span><br><span class="line">					path:&apos;/detail&apos;,</span><br><span class="line">					component:&#123;</span><br><span class="line">						template:`</span><br><span class="line">							&lt;div&gt;</span><br><span class="line">							 	detail</span><br><span class="line">							&lt;/div&gt;</span><br><span class="line">						`</span><br><span class="line">					&#125;,</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">			]</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&apos;#app&apos;,</span><br><span class="line">			router:router,</span><br><span class="line">			data:&#123;</span><br><span class="line">				effect:&apos;&apos;</span><br><span class="line">			&#125;,</span><br><span class="line">			watch:&#123;</span><br><span class="line">				&apos;$route&apos;(to,from)&#123;</span><br><span class="line">					var effectMap = &#123;</span><br><span class="line">						&quot;/&quot;:&quot;shake&quot;,</span><br><span class="line">						&quot;/list&quot;:&quot;jello&quot;,</span><br><span class="line">						&quot;/detail&quot;:&quot;bounce&quot;</span><br><span class="line">					&#125;;</span><br><span class="line">				this.effect = [&apos;animated&apos;,effectMap[to.path]].join(&apos; &apos;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="3-vuex基础知识"><a href="#3-vuex基础知识" class="headerlink" title="3.vuex基础知识"></a>3.vuex基础知识</h1><h2 id="3-1state"><a href="#3-1state" class="headerlink" title="3.1state"></a>3.1state</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;状态管理&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vuex/3.1.0/vuex.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&#123;&#123;count&#125;&#125;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var store = new Vuex.Store(&#123;</span><br><span class="line">			state:&#123;</span><br><span class="line">				count:0</span><br><span class="line">			&#125;,</span><br><span class="line">			mutations:&#123;</span><br><span class="line">				increment(state)&#123;</span><br><span class="line">					state.count++</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		store.commit(&apos;increment&apos;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&quot;#app&quot;,</span><br><span class="line">			store,</span><br><span class="line">			computed:Vuex.mapState([&apos;count&apos;])</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-2getter"><a href="#3-2getter" class="headerlink" title="3.2getter"></a>3.2getter</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;状态管理&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vuex/3.1.0/vuex.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    	&#123;&#123;add(2)&#125;&#125;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var store = new Vuex.Store(&#123;</span><br><span class="line">			state:&#123;</span><br><span class="line">				count:0</span><br><span class="line">			&#125;,</span><br><span class="line">			getters:&#123;</span><br><span class="line">				add:state =&gt; n =&gt; &#123;</span><br><span class="line">					return state.count + n;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		var app = new Vue(&#123;</span><br><span class="line">			el:&quot;#app&quot;,</span><br><span class="line">			store,</span><br><span class="line">			computed:Vuex.mapGetters([&apos;add&apos;])</span><br><span class="line">		&#125;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-3mutations"><a href="#3-3mutations" class="headerlink" title="3.3mutations"></a>3.3mutations</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;状态管理&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vuex/3.1.0/vuex.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var ADD = &apos;ADD&apos;; </span><br><span class="line">		var store = new Vuex.Store(&#123;</span><br><span class="line">			state:&#123;</span><br><span class="line">				count:0</span><br><span class="line">			&#125;,</span><br><span class="line">			mutations:&#123;</span><br><span class="line">				[ADD](state,payload)&#123;</span><br><span class="line">					state.count+=payload.n</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		store.commit(&#123;</span><br><span class="line">			type:&apos;ADD&apos;,</span><br><span class="line">			n:10</span><br><span class="line">		&#125;)</span><br><span class="line">		console.log(store.state.count)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-4actions"><a href="#3-4actions" class="headerlink" title="3.4actions"></a>3.4actions</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">	&lt;title&gt;状态管理&lt;/title&gt;</span><br><span class="line">	&lt;script src=&quot;https://unpkg.com/vue/dist/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">	&lt;script src=&quot;https://cdn.bootcss.com/vuex/3.1.0/vuex.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;script&gt;</span><br><span class="line">		var ADD = &apos;ADD&apos;; </span><br><span class="line">		var store = new Vuex.Store(&#123;</span><br><span class="line">			state:&#123;</span><br><span class="line">				count:0</span><br><span class="line">			&#125;,</span><br><span class="line">			mutations:&#123;</span><br><span class="line">				increment(state)&#123;</span><br><span class="line">					state.count++</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			actions:&#123;</span><br><span class="line">				[ADD](state,payload)&#123;</span><br><span class="line">					setTimeout(()=&gt;&#123;</span><br><span class="line">						commit(&apos;increment&apos;)</span><br><span class="line">					&#125;,3000)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">		store.dispatch(&apos;ADD&apos;)</span><br><span class="line">	&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="4-vueSSR基础知识"><a href="#4-vueSSR基础知识" class="headerlink" title="4.vueSSR基础知识"></a>4.vueSSR基础知识</h1><h2 id="4-1纯浏览器端渲染"><a href="#4-1纯浏览器端渲染" class="headerlink" title="4.1纯浏览器端渲染"></a>4.1纯浏览器端渲染</h2><p><code>实现纯浏览器端渲染的关键是render: h =&gt; h(App)，render会将app转化成html的节点插入到页面</code><br><code>目录结构</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- node_modules</span><br><span class="line">- components  </span><br><span class="line">    - Bar.vue</span><br><span class="line">    - Foo.vue</span><br><span class="line">- App.vue</span><br><span class="line">- app.js</span><br><span class="line">- index.html</span><br><span class="line">- webpack.config.js</span><br><span class="line">- package.json</span><br><span class="line">- yarn.lock</span><br><span class="line">- postcss.config.js</span><br><span class="line">- .babelrc</span><br><span class="line">- .gitignore</span><br></pre></td></tr></table></figure>

<p><code>app.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;;</span><br><span class="line">import App from &apos;./App.vue&apos;;</span><br><span class="line"></span><br><span class="line">let app = new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  render: h =&gt; h(App)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>app.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Foo&gt;&lt;/Foo&gt;</span><br><span class="line">    &lt;Bar&gt;&lt;/Bar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Foo from &apos;./components/Foo.vue&apos;;</span><br><span class="line">import Bar from &apos;./components/Bar.vue&apos;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Foo, Bar</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>index.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">  &lt;title&gt;纯浏览器渲染&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><code>components/Foo.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;foo&quot;&gt;</span><br><span class="line">    &lt;h1&gt;Foo Component&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.foo &#123;</span><br><span class="line">  background: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>components/Bar.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;bar&quot;&gt;</span><br><span class="line">    &lt;h1&gt;Bar Component&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.bar &#123;</span><br><span class="line">  background: bisque;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>webpack.config.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const VueLoaderPlugin = require(&apos;vue-loader/lib/plugin&apos;);</span><br><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br><span class="line">const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  mode: &apos;development&apos;,</span><br><span class="line"></span><br><span class="line">  entry: &apos;./app.js&apos;,</span><br><span class="line"></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &apos;dist&apos;),</span><br><span class="line">    filename: &apos;bundle.js&apos;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        use: &apos;babel-loader&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        use: [&apos;vue-style-loader&apos;, &apos;css-loader&apos;, &apos;postcss-loader&apos;]</span><br><span class="line">        // 如果需要单独抽出CSS文件，用下面这个配置</span><br><span class="line">        // use: ExtractTextPlugin.extract(&#123;</span><br><span class="line">        //   fallback: &apos;vue-style-loader&apos;,</span><br><span class="line">        //   use: [</span><br><span class="line">        //     &apos;css-loader&apos;,</span><br><span class="line">        //     &apos;postcss-loader&apos;</span><br><span class="line">        //   ]</span><br><span class="line">        // &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(jpg|jpeg|png|gif|svg)$/,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: &apos;url-loader&apos;,</span><br><span class="line">          options: &#123;</span><br><span class="line">            limit: 10000    // 10Kb</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.vue$/,</span><br><span class="line">        use: &apos;vue-loader&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line">    new VueLoaderPlugin(),</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: &apos;./index.html&apos;</span><br><span class="line">    &#125;),</span><br><span class="line">    // 如果需要单独抽出CSS文件，用下面这个配置</span><br><span class="line">    // new ExtractTextPlugin(&quot;styles.css&quot;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>postcss.config.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    require(&apos;autoprefixer&apos;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>.babelrc</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;@babel/preset-env&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    // 让其支持动态路由的写法 const Foo = () =&gt; import(&apos;../components/Foo.vue&apos;)</span><br><span class="line">    &quot;dynamic-import-webpack&quot;    </span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>package.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;01&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;MIT&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;yarn run dev&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dev-server&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;webpack&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;vue&quot;: &quot;^2.5.17&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;@babel/core&quot;: &quot;^7.1.2&quot;,</span><br><span class="line">    &quot;@babel/preset-env&quot;: &quot;^7.1.0&quot;,</span><br><span class="line">    &quot;babel-plugin-dynamic-import-webpack&quot;: &quot;^1.1.0&quot;,</span><br><span class="line">    &quot;autoprefixer&quot;: &quot;^9.1.5&quot;,</span><br><span class="line">    &quot;babel-loader&quot;: &quot;^8.0.4&quot;,</span><br><span class="line">    &quot;css-loader&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">    &quot;extract-text-webpack-plugin&quot;: &quot;^4.0.0-beta.0&quot;,</span><br><span class="line">    &quot;file-loader&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;html-webpack-plugin&quot;: &quot;^3.2.0&quot;,</span><br><span class="line">    &quot;postcss&quot;: &quot;^7.0.5&quot;,</span><br><span class="line">    &quot;postcss-loader&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;url-loader&quot;: &quot;^1.1.1&quot;,</span><br><span class="line">    &quot;vue-loader&quot;: &quot;^15.4.2&quot;,</span><br><span class="line">    &quot;vue-style-loader&quot;: &quot;^4.1.2&quot;,</span><br><span class="line">    &quot;vue-template-compiler&quot;: &quot;^2.5.17&quot;,</span><br><span class="line">    &quot;webpack&quot;: &quot;^4.20.2&quot;,</span><br><span class="line">    &quot;webpack-cli&quot;: &quot;^3.1.2&quot;,</span><br><span class="line">    &quot;webpack-dev-server&quot;: &quot;^3.1.9&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>启动</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn start</span><br></pre></td></tr></table></figure>

<p><code>构建</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn run build</span><br></pre></td></tr></table></figure>

<p><code>效果图：</code><br><img src="https://segmentfault.com/img/remote/1460000018556186?w=1595&h=676" alt="browserrender"></p>
<h2 id="4-2纯服务器端端渲染-无ajax"><a href="#4-2纯服务器端端渲染-无ajax" class="headerlink" title="4.2纯服务器端端渲染(无ajax)"></a>4.2纯服务器端端渲染(无ajax)</h2><p><code>让一份代码既可以在服务端运行，也可以在客户端运行,如果说在SSR的过程中出现问题，还可以回滚到纯浏览器渲染，保证用户正常看到页面,顺着这个思路，肯定就会有两个webpack的入口文件，一个用于浏览器端渲染weboack.client.config.js，一个用于服务端渲染webpack.server.config.js，将它们的公有部分抽出来作为webpack.base.cofig.js，后续通过webpack-merge进行合并。同时，也要有一个server来提供http服务，我这里用的是koa</code><br><code>实现这些的关键是require(&#39;vue-server-renderer&#39;).createBundleRenderer(server.bundle.js,{ template:&quot;index.ssr.html&quot;}).renderToString((err, html) =&gt; { })</code><br><code>目录结构</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- node_modules</span><br><span class="line">- config    // 新增</span><br><span class="line">    - webpack.base.config.js</span><br><span class="line">    - webpack.client.config.js</span><br><span class="line">    - webpack.server.config.js</span><br><span class="line">- src</span><br><span class="line">    - components  </span><br><span class="line">        - Bar.vue</span><br><span class="line">        - Foo.vue</span><br><span class="line">    - App.vue</span><br><span class="line">    - app.js</span><br><span class="line">    - entry-client.js   // 新增</span><br><span class="line">    - entry-server.js   // 新增</span><br><span class="line">    - index.html</span><br><span class="line">    - index.ssr.html    // 新增</span><br><span class="line">- package.json</span><br><span class="line">- yarn.lock</span><br><span class="line">- postcss.config.js</span><br><span class="line">- .babelrc</span><br><span class="line">- .gitignore</span><br></pre></td></tr></table></figure>

<p><code>对app.js做修改，将其包装为一个工厂函数，每次调用都会生成一个全新的根组件</code><br><code>app.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;;</span><br><span class="line">import App from &apos;./App.vue&apos;;</span><br><span class="line"></span><br><span class="line">export function createApp() &#123;</span><br><span class="line">  const app = new Vue(&#123;</span><br><span class="line">    render: h =&gt; h(App)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return &#123; app &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>在浏览器端，我们直接新建一个根组件，然后将其挂载就可以了</code><br><code>entry-client.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;./app.js&apos;;</span><br><span class="line"></span><br><span class="line">const &#123; app &#125; = createApp();</span><br><span class="line"></span><br><span class="line">app.$mount(&apos;#app&apos;);</span><br></pre></td></tr></table></figure>

<p><code>在服务器端，我们就要返回一个函数，该函数的作用是接收一个context参数，同时每次都返回一个新的根组件。这个context在这里我们还不会用到，后续的步骤会用到它</code><br><code>entry-server.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;./app.js&apos;;</span><br><span class="line"></span><br><span class="line">export default context =&gt; &#123;</span><br><span class="line">  const &#123; app &#125; = createApp();</span><br><span class="line"></span><br><span class="line">  return app;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>然后再来看一下index.ssr.html</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">  &lt;title&gt;服务端渲染&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;!--vue-ssr-outlet--&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%= htmlWebpackPlugin.options.files.js %&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><code>&lt;!--vue-ssr-outlet--&gt;的作用是作为一个占位符，后续通过vue-server-renderer插件，将服务器解析出的组件html字符串插入到这里。&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%= htmlWebpackPlugin.options.files.js %&gt;&quot;&gt;&lt;/script&gt;是为了将webpack通过webpack.client.config.js打包出的文件放到这里</code><br><code>因为服务端吐出来的就是一个html字符串，后续的Vue相关的响应式、事件响应等等，都需要浏览器端来接管，所以就需要将为浏览器端渲染打包的文件在这里引入,用官方的词来说，叫客户端激活（client-side hydration）</code><br><code>所谓客户端激活，指的是 Vue 在浏览器端接管由服务端发送的静态 HTML，使其变为由 Vue 管理的动态 DOM 的过程</code><br><code>在 entry-client.js 中，我们用下面这行挂载(mount)应用程序</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 这里假定 App.vue template 根元素的 `id=&quot;app&quot;`</span><br><span class="line">app.$mount(&apos;#app&apos;)</span><br></pre></td></tr></table></figure>

<p><code>由于服务器已经渲染好了 HTML，我们显然无需将其丢弃再重新创建所有的 DOM 元素。相反，我们需要&quot;激活&quot;这些静态的 HTML，然后使他们成为动态的（能够响应后续的数据变化）。</code><br><code>如果你检查服务器渲染的输出结果，你会注意到应用程序的根元素上添加了一个特殊的属性：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; data-server-rendered=&quot;true&quot;&gt;</span><br></pre></td></tr></table></figure>

<p><code>Vue在浏览器端就依靠这个属性将服务器吐出来的html进行激活，我们一会自己构建一下就可以看到了。接下来我们看一下webpack相关的配置：</code><br><code>webpack.base.config.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const VueLoaderPlugin = require(&apos;vue-loader/lib/plugin&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  mode: &apos;development&apos;,</span><br><span class="line"></span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [&apos;.js&apos;, &apos;.vue&apos;]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, &apos;../dist&apos;),</span><br><span class="line">    filename: &apos;[name].bundle.js&apos;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.vue$/,</span><br><span class="line">        use: &apos;vue-loader&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.js$/,</span><br><span class="line">        use: &apos;babel-loader&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.css$/,</span><br><span class="line">        use: [&apos;vue-style-loader&apos;, &apos;css-loader&apos;, &apos;postcss-loader&apos;]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(jpg|jpeg|png|gif|svg)$/,</span><br><span class="line">        use: &#123;</span><br><span class="line">          loader: &apos;url-loader&apos;,</span><br><span class="line">          options: &#123;</span><br><span class="line">            limit: 10000    // 10Kb</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line">    new VueLoaderPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>webpack.client.config.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const merge = require(&apos;webpack-merge&apos;);</span><br><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br><span class="line">const base = require(&apos;./webpack.base.config&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    client: path.resolve(__dirname, &apos;../src/entry-client.js&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: path.resolve(__dirname, &apos;../src/index.html&apos;),</span><br><span class="line">      filename: &apos;index.html&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>注意，这里的入口文件变成了entry-client.js，将其打包出的client.bundle.js插入到index.html中</code><br><code>webpack.server.config.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const merge = require(&apos;webpack-merge&apos;);</span><br><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br><span class="line">const base = require(&apos;./webpack.base.config&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">  target: &apos;node&apos;,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    server: path.resolve(__dirname, &apos;../src/entry-server.js&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    libraryTarget: &apos;commonjs2&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: path.resolve(__dirname, &apos;../src/index.ssr.html&apos;),</span><br><span class="line">      filename: &apos;index.ssr.html&apos;,</span><br><span class="line">      files: &#123;</span><br><span class="line">        js: &apos;client.bundle.js&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      excludeChunks: [&apos;server&apos;]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>这里有几个点需要注意一下：</code></p>
<ul>
<li>入口文件是 entry-server.js</li>
<li>因为是打包服务器端依赖的代码，所以target要设为node，同时，output的libraryTarget要设为commonjs2<br><code>入口文件是 entry-server.js,因为是打包服务器端依赖的代码，所以target要设为node，同时，output的libraryTarget要设为commonjs2</code><br><code>这里关于HtmlWebpackPlugin配置的意思是，不要在index.ssr.html中引入打包出的server.bundle.js，要引为浏览器打包的client.bundle.js，原因前面说过了，是为了让Vue可以将服务器吐出来的html进行激活，从而接管后续响应。</code><br><code>那么打包出的server.bundle.js在哪用呢？接着往下看就知道啦</code></li>
</ul>
<p><code>package.json</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;01&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;MIT&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;yarn run dev&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dev-server&quot;,</span><br><span class="line">    &quot;build:client&quot;: &quot;webpack --config config/webpack.client.config.js&quot;,</span><br><span class="line">    &quot;build:server&quot;: &quot;webpack --config config/webpack.server.config.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;koa&quot;: &quot;^2.5.3&quot;,</span><br><span class="line">    &quot;koa-router&quot;: &quot;^7.4.0&quot;,</span><br><span class="line">    &quot;koa-static&quot;: &quot;^5.0.0&quot;,</span><br><span class="line">    &quot;vue&quot;: &quot;^2.5.17&quot;,</span><br><span class="line">    &quot;vue-server-renderer&quot;: &quot;^2.5.17&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;@babel/core&quot;: &quot;^7.1.2&quot;,</span><br><span class="line">    &quot;@babel/preset-env&quot;: &quot;^7.1.0&quot;,</span><br><span class="line">    &quot;autoprefixer&quot;: &quot;^9.1.5&quot;,</span><br><span class="line">    &quot;babel-loader&quot;: &quot;^8.0.4&quot;,</span><br><span class="line">    &quot;css-loader&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">    &quot;extract-text-webpack-plugin&quot;: &quot;^4.0.0-beta.0&quot;,</span><br><span class="line">    &quot;file-loader&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;html-webpack-plugin&quot;: &quot;^3.2.0&quot;,</span><br><span class="line">    &quot;postcss&quot;: &quot;^7.0.5&quot;,</span><br><span class="line">    &quot;postcss-loader&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;style-loader&quot;: &quot;^0.23.0&quot;,</span><br><span class="line">    &quot;url-loader&quot;: &quot;^1.1.1&quot;,</span><br><span class="line">    &quot;vue-loader&quot;: &quot;^15.4.2&quot;,</span><br><span class="line">    &quot;vue-style-loader&quot;: &quot;^4.1.2&quot;,</span><br><span class="line">    &quot;vue-template-compiler&quot;: &quot;^2.5.17&quot;,</span><br><span class="line">    &quot;webpack&quot;: &quot;^4.20.2&quot;,</span><br><span class="line">    &quot;webpack-cli&quot;: &quot;^3.1.2&quot;,</span><br><span class="line">    &quot;webpack-dev-server&quot;: &quot;^3.1.9&quot;,</span><br><span class="line">    &quot;webpack-merge&quot;: &quot;^4.1.4&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>接下来我们看server端关于http服务的代码:</code><br><code>server/server.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;);</span><br><span class="line">const Router = require(&apos;koa-router&apos;);</span><br><span class="line">const serve = require(&apos;koa-static&apos;);</span><br><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">const backendApp = new Koa();</span><br><span class="line">const frontendApp = new Koa();</span><br><span class="line">const backendRouter = new Router();</span><br><span class="line">const frontendRouter = new Router();</span><br><span class="line"></span><br><span class="line">const bundle = fs.readFileSync(path.resolve(__dirname, &apos;../dist/server.bundle.js&apos;), &apos;utf-8&apos;);</span><br><span class="line">const renderer = require(&apos;vue-server-renderer&apos;).createBundleRenderer(bundle, &#123;</span><br><span class="line">  template: fs.readFileSync(path.resolve(__dirname, &apos;../dist/index.ssr.html&apos;), &apos;utf-8&apos;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 后端Server</span><br><span class="line">backendRouter.get(&apos;/index&apos;, (ctx, next) =&gt; &#123;</span><br><span class="line">  // 这里用 renderToString 的 promise 返回的 html 有问题，没有样式</span><br><span class="line">  renderer.renderToString((err, html) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">      console.error(err);</span><br><span class="line">      ctx.status = 500;</span><br><span class="line">      ctx.body = &apos;服务器内部错误&apos;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      console.log(html);</span><br><span class="line">      ctx.status = 200;</span><br><span class="line">      ctx.body = html;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">backendApp.use(serve(path.resolve(__dirname, &apos;../dist&apos;)));</span><br><span class="line"></span><br><span class="line">backendApp</span><br><span class="line">  .use(backendRouter.routes())</span><br><span class="line">  .use(backendRouter.allowedMethods());</span><br><span class="line"></span><br><span class="line">backendApp.listen(3000, () =&gt; &#123;</span><br><span class="line">  console.log(&apos;服务器端渲染地址： http://localhost:3000&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 前端Server</span><br><span class="line">frontendRouter.get(&apos;/index&apos;, (ctx, next) =&gt; &#123;</span><br><span class="line">  let html = fs.readFileSync(path.resolve(__dirname, &apos;../dist/index.html&apos;), &apos;utf-8&apos;);</span><br><span class="line">  ctx.type = &apos;html&apos;;</span><br><span class="line">  ctx.status = 200;</span><br><span class="line">  ctx.body = html;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">frontendApp.use(serve(path.resolve(__dirname, &apos;../dist&apos;)));</span><br><span class="line"></span><br><span class="line">frontendApp</span><br><span class="line">  .use(frontendRouter.routes())</span><br><span class="line">  .use(frontendRouter.allowedMethods());</span><br><span class="line"></span><br><span class="line">frontendApp.listen(3001, () =&gt; &#123;</span><br><span class="line">  console.log(&apos;浏览器端渲染地址： http://localhost:3001&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>这里对两个端口进行监听，3000端口是服务端渲染，3001端口是直接输出index.html，然后会在浏览器端走Vue的那一套，主要是为了和服务端渲染做对比使用。这里的关键代码是如何在服务端去输出html字符串</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const bundle = fs.readFileSync(path.resolve(__dirname, &apos;../dist/server.bundle.js&apos;), &apos;utf-8&apos;);</span><br><span class="line">const renderer = require(&apos;vue-server-renderer&apos;).createBundleRenderer(bundle, &#123;</span><br><span class="line">  template: fs.readFileSync(path.resolve(__dirname, &apos;../dist/index.ssr.html&apos;), &apos;utf-8&apos;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>可以看到，server.bundle.js在这里被使用啦，因为它的入口是一个函数，接收context作为参数（非必传），输出一个根组件app</code><br><code>这里我们用到了vue-server-renderer插件，它有两个方法可以做渲染，一个是createRenderer，另一个是createBundleRenderer</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const &#123; createRenderer &#125; = require(&apos;vue-server-renderer&apos;)</span><br><span class="line">const renderer = createRenderer(&#123; /* 选项 */ &#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const &#123; createBundleRenderer &#125; = require(&apos;vue-server-renderer&apos;)</span><br><span class="line">const renderer = createBundleRenderer(serverBundle, &#123; /* 选项 */ &#125;)</span><br></pre></td></tr></table></figure>

<p><code>createRenderer无法接收为服务端打包出的server.bundle.js文件，所以这里只能用createBundleRenderer</code><br><code>serverBundle 参数可以是以下之一：</code></p>
<ul>
<li>绝对路径，指向一个已经构建好的 bundle 文件（.js 或 .json）。必须以 / 开头才会被识别为文件路径</li>
<li>由 webpack + vue-server-renderer/server-plugin 生成的 bundle 对象。</li>
<li>JavaScript 代码字符串（不推荐）。<br><code>这里我们引入的是.js文件，后续会介绍如何使用.json文件以及有什么好处。</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">renderer.renderToString((err, html) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">      console.error(err);</span><br><span class="line">      ctx.status = 500;</span><br><span class="line">      ctx.body = &apos;服务器内部错误&apos;;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      console.log(html);</span><br><span class="line">      ctx.status = 200;</span><br><span class="line">      ctx.body = html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><code>使用createRenderer和createBundleRenderer返回的renderer函数包含两个方法renderToString和renderToStream，我们这里用的是renderToString成功后直接返回一个完整的字符串，renderToStream返回的是一个Node流。</code><br><code>renderToString支持Promise，但是我在使用Prmoise形式的时候样式会渲染不出来，暂时还不知道原因</code><br><code>配置基本就完成了，来看一下如何运行。</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn run build:client       // 打包浏览器端需要bundle</span><br><span class="line">yarn run build:server       // 打包SSR需要bundle</span><br><span class="line"></span><br><span class="line">yarn start      // 其实就是 node server/server.js，提供http服务</span><br></pre></td></tr></table></figure>

<p><img src="https://segmentfault.com/img/remote/1460000018556187" alt="serverrender"></p>
<h2 id="4-3纯服务器端端渲染-有ajax"><a href="#4-3纯服务器端端渲染-有ajax" class="headerlink" title="4.3纯服务器端端渲染(有ajax)"></a>4.3纯服务器端端渲染(有ajax)</h2><p><code>如果SSR需要初始化一些异步数据，那么流程就会变得复杂一些,我们先提出几个问题：</code></p>
<ul>
<li>服务端拿异步数据的步骤在哪做？</li>
<li>如何确定哪些组件需要获取异步数据？</li>
<li>获取到异步数据之后要如何塞回到组件内？<br><code>服务器端渲染和浏览器端渲染组件经过的生命周期是有区别的，在服务器端，只会经历beforeCreate和created两个生命周期。因为SSR服务器直接吐出html字符串就好了，不会渲染DOM结构，所以不存在beforeMount和mounted的，也不会对其进行更新，所以也就不存在beforeUpdate和updated等</code><br><code>我们先来想一下，在纯浏览器渲染的Vue项目中，我们是怎么获取异步数据并渲染到组件中的？一般是在created或者mounted生命周期里发起异步请求，然后在成功回调里执行this.data = xxx，Vue监听到数据发生改变，走后面的Dom Diff，打patch，做DOM更新</code><br><code>那么服务端渲染可不可以也这么做呢？答案是不行的。</code></li>
<li>在mounted里肯定不行，因为SSR都没有mounted生命周期，所以在这里肯定不行。</li>
<li>在beforeCreate里发起异步请求是否可以呢，也是不行的。因为请求是异步的，可能还没有等接口返回，服务端就已经把html字符串拼接出来了。<br><code>那应该怎么做呢？</code></li>
<li>在渲染前，要预先获取所有需要的异步数据，然后存到Vuex的store中。</li>
<li>在后端渲染时，通过Vuex将获取到的数据注入到相应组件中。</li>
<li>把store中的数据设置到window.<strong>INITIAL_STATE</strong>属性中。</li>
<li>在浏览器环境中，通过Vuex将window.<strong>INITIAL_STATE</strong>里面的数据注入到相应组件中。</li>
</ul>
<p><code>正常情况下，通过这几个步骤，服务端吐出来的html字符串相应组件的数据都是最新的，所以第4步并不会引起DOM更新，但如果出了某些问题，吐出来的html字符串没有相应数据，Vue也可以在浏览器端通过</code>Vuex注入数据，进行DOM更新。<code></code>更新后的目录`</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- node_modules</span><br><span class="line">- config</span><br><span class="line">   - webpack.base.config.js</span><br><span class="line">   - webpack.client.config.js</span><br><span class="line">   - webpack.server.config.js</span><br><span class="line">- src</span><br><span class="line">   - components  </span><br><span class="line">       - Bar.vue</span><br><span class="line">       - Foo.vue</span><br><span class="line">   - store             // 新增</span><br><span class="line">       store.js</span><br><span class="line">   - App.vue</span><br><span class="line">   - app.js</span><br><span class="line">   - entry-client.js</span><br><span class="line">   - entry-server.js   </span><br><span class="line">   - index.html</span><br><span class="line">   - index.ssr.html</span><br><span class="line">- package.json</span><br><span class="line">- yarn.lock</span><br><span class="line">- postcss.config.js</span><br><span class="line">- .babelrc</span><br><span class="line">- .gitignore</span><br></pre></td></tr></table></figure>

<p><code>store/store.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;;</span><br><span class="line">import Vuex from &apos;vuex&apos;;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line">const fetchBar = function() &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      resolve(&apos;bar 组件返回 ajax 数据&apos;);</span><br><span class="line">    &#125;, 1000);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function createStore() &#123;</span><br><span class="line">  const store = new Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">      bar: &apos;&apos;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    mutations: &#123;</span><br><span class="line">      &apos;SET_BAR&apos;(state, data) &#123;</span><br><span class="line">        state.bar = data;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    actions: &#123;</span><br><span class="line">      fetchBar(&#123; commit &#125;) &#123;</span><br><span class="line">        return fetchBar().then((data) =&gt; &#123;</span><br><span class="line">          commit(&apos;SET_BAR&apos;, data);</span><br><span class="line">        &#125;).catch((err) =&gt; &#123;</span><br><span class="line">          console.error(err);</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  if (typeof window !== &apos;undefined&apos; &amp;&amp; window.__INITIAL_STATE__) &#123;</span><br><span class="line">    console.log(&apos;window.__INITIAL_STATE__&apos;, window.__INITIAL_STATE__);</span><br><span class="line">    store.replaceState(window.__INITIAL_STATE__);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  return store;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default createStore;</span><br><span class="line"></span><br><span class="line">typeof window</span><br></pre></td></tr></table></figure>

<p><code>这里fetchBar可以看成是一个异步请求，这里用setTimeout模拟。在成功回调中commit相应的mutation进行状态修改。</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (typeof window !== &apos;undefined&apos; &amp;&amp; window.__INITIAL_STATE__) &#123;</span><br><span class="line">    console.log(&apos;window.__INITIAL_STATE__&apos;, window.__INITIAL_STATE__);</span><br><span class="line">    store.replaceState(window.__INITIAL_STATE__);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>因为store.js同样也会被打包到服务器运行的server.bundle.js中，所以运行环境不一定是浏览器，这里需要对window做判断，防止报错，同时如果有window.__INITIAL_STATE__属性，说明服务器已经把所有初始化需要的异步数据都获取完成了，要对store中的状态做一个替换，保证统一</code><br><code>components/Bar.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;bar&quot;&gt;</span><br><span class="line">    &lt;h1 @click=&quot;onHandleClick&quot;&gt;Bar Component&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;异步Ajax数据：&lt;/h2&gt;</span><br><span class="line">    &lt;span&gt;&#123;&#123; msg &#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const fetchInitialData = (&#123; store &#125;) =&gt; &#123;</span><br><span class="line">    store.dispatch(&apos;fetchBar&apos;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    asyncData: fetchInitialData,</span><br><span class="line"></span><br><span class="line">    methods: &#123;</span><br><span class="line">      onHandleClick() &#123;</span><br><span class="line">        alert(&apos;bar&apos;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    mounted() &#123;</span><br><span class="line">      // 因为服务端渲染只有 beforeCreate 和 created 两个生命周期，不会走这里</span><br><span class="line">      // 所以把调用 Ajax 初始化数据也写在这里，是为了供单独浏览器渲染使用</span><br><span class="line">      let store = this.$store;</span><br><span class="line">      fetchInitialData(&#123; store &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    computed: &#123;</span><br><span class="line">      msg() &#123;</span><br><span class="line">        return this.$store.state.bar;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.bar &#123;</span><br><span class="line">  background: bisque;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>这里在Bar组件的默认导出对象中增加了一个方法asyncData，在该方法中会dispatch相应的action，进行异步数据获取。需要注意的是，我在mounted中也写了获取数据的代码，这是为什么呢？ 因为想要做到同构，代码单独在浏览器端运行，也应该是没有问题的，又由于服务器没有mounted生命周期，所以我写在这里就可以解决单独在浏览器环境使用也可以发起同样的异步请求去初始化数据。</code></p>
<p><code>components/Foo.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;foo&quot;&gt;</span><br><span class="line">    &lt;h1 @click=&quot;onHandleClick&quot;&gt;Foo Component&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    onHandleClick() &#123;</span><br><span class="line">      alert(&apos;foo&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.foo &#123;</span><br><span class="line">  background: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><code>这里我对两个组件都添加了一个点击事件，为的是证明在服务器吐出首页html后，后续的步骤都会被浏览器端的Vue接管，可以正常执行后面的操作</code><br><code>app.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;;</span><br><span class="line">import createStore from &apos;./store/store.js&apos;;</span><br><span class="line">import App from &apos;./App.vue&apos;;</span><br><span class="line"></span><br><span class="line">export function createApp() &#123;</span><br><span class="line">  const store = createStore();</span><br><span class="line"></span><br><span class="line">  const app = new Vue(&#123;</span><br><span class="line">    store,</span><br><span class="line">    render: h =&gt; h(App)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return &#123; app, store, App &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>在建立根组件的时候，要把Vuex的store传进去，同时要返回，后续会用到。最后来看一下entry-server.js，关键步骤在这里：</code><br><code>entry-server.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;./app.js&apos;;</span><br><span class="line"></span><br><span class="line">export default context =&gt; &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    const &#123; app, store, App &#125; = createApp();</span><br><span class="line"></span><br><span class="line">    let components = App.components;</span><br><span class="line">    let asyncDataPromiseFns = [];</span><br><span class="line">  </span><br><span class="line">    Object.values(components).forEach(component =&gt; &#123;</span><br><span class="line">      if (component.asyncData) &#123;</span><br><span class="line">        asyncDataPromiseFns.push(component.asyncData(&#123; store &#125;));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">    Promise.all(asyncDataPromiseFns).then((result) =&gt; &#123;</span><br><span class="line">      // 当使用 template 时，context.state 将作为 window.__INITIAL_STATE__ 状态，自动嵌入到最终的 HTML 中</span><br><span class="line">      context.state = store.state;</span><br><span class="line">  </span><br><span class="line">      console.log(222);</span><br><span class="line">      console.log(store.state);</span><br><span class="line">      console.log(context.state);</span><br><span class="line">      console.log(context);</span><br><span class="line">  </span><br><span class="line">      resolve(app);</span><br><span class="line">    &#125;, reject);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>我们通过导出的App拿到了所有它下面的components，然后遍历，找出哪些component有asyncData方法，有的话调用并传入store，该方法会返回一个Promise，我们使用Promise.all等所有的异步方法都成功返回，才resolve(app)。context.state = store.state作用是，当使用createBundleRenderer时，如果设置了template选项，那么会把context.state的值作为window.__INITIAL_STATE__自动插入到模板html中。</code><br><code>运行：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yarn run build:client</span><br><span class="line">yarn run build:server</span><br><span class="line"></span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure>

<p><img src="https://segmentfault.com/img/remote/1460000018556188" alt="sdf"></p>
<p><code>可以看到window.__INITIAL_STATE__被自动插入了。我们来对比一下SSR到底对加载性能有什么影响吧。服务端渲染时performance截图：</code><br><img src="https://segmentfault.com/img/remote/1460000018556189" alt="fghj"><br><code>纯浏览器端渲染时performance截图：</code><br><img src="https://segmentfault.com/img/remote/1460000018556190" alt="ffsdvs"></p>
<p><code>同样都是在fast 3G网络模式下，纯浏览器端渲染首屏加载花费时间2.9s，因为client.js加载就花费了2.27s，因为没有client.js就没有Vue，也就没有后面的东西了。服务端渲染首屏时间花费0.8s，虽然client.js加载扔花费2.27s，但是首屏已经不需要它了，它是为了让Vue在浏览器端进行后续接管。从这我们可以真正的看到，服务端渲染对于提升首屏的响应速度是很有作用的。当然有的同学可能会问，在服务端渲染获取初始ajax数据时，我们还延时了1s，在这个时间用户也是看不到页面的。没错，接口的时间我们无法避免，就算是纯浏览器渲染，首页该调接口还是得调，如果接口响应慢，那么纯浏览器渲染看到完整页面的时间会更慢。</code></p>
<h2 id="4-4serverBundle和clientManifest进行优化"><a href="#4-4serverBundle和clientManifest进行优化" class="headerlink" title="4.4serverBundle和clientManifest进行优化"></a>4.4serverBundle和clientManifest进行优化</h2><p><code>前面我们创建服务端renderer的方法是：</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const bundle = fs.readFileSync(path.resolve(__dirname, &apos;../dist/server.js&apos;), &apos;utf-8&apos;);</span><br><span class="line">const renderer = require(&apos;vue-server-renderer&apos;).createBundleRenderer(bundle, &#123;</span><br><span class="line">  template: fs.readFileSync(path.resolve(__dirname, &apos;../dist/index.ssr.html&apos;), &apos;utf-8&apos;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>serverBundle我们用的是打包出的server.bundle.js文件。这样做的话，在每次编辑过应用程序源代码之后，都必须停止并重启服务。这在开发过程中会影响开发效率。此外，Node.js 本身不支持 source map</code><br><code>vue-server-renderer 提供一个名为 createBundleRenderer 的 API，用于处理此问题，通过使用 webpack 的自定义插件，server bundle 将生成为可传递到 bundle renderer 的特殊 JSON 文件。所创建的 bundle renderer，用法和普通 renderer 相同，但是 bundle renderer 提供以下优点:</code></p>
<ul>
<li>内置的 source map 支持（在 webpack 配置中使用 devtool: ‘source-map’）</li>
<li>在开发环境甚至部署过程中热重载（通过读取更新后的 bundle，然后重新创建 renderer 实例）</li>
<li>关键 CSS(critical CSS) 注入（在使用 *.vue 文件时）：自动内联在渲染过程中用到的组件所需的CSS</li>
<li>使用 clientManifest 进行资源注入：自动推断出最佳的预加载(preload)和预取(prefetch)指令，以及初始渲染所需的代码分割 chunk。</li>
</ul>
<p><code>那么我们来修改webpack配置：</code><br><code>webpack.client.config.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const merge = require(&apos;webpack-merge&apos;);</span><br><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br><span class="line">const VueSSRClientPlugin = require(&apos;vue-server-renderer/client-plugin&apos;);</span><br><span class="line">const base = require(&apos;./webpack.base.config&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    client: path.resolve(__dirname, &apos;../src/entry-client.js&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line">    new VueSSRClientPlugin(),   // 新增</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: path.resolve(__dirname, &apos;../src/index.html&apos;),</span><br><span class="line">      filename: &apos;index.html&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>webpack.server.config.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const merge = require(&apos;webpack-merge&apos;);</span><br><span class="line">const nodeExternals = require(&apos;webpack-node-externals&apos;);</span><br><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br><span class="line">const VueSSRServerPlugin = require(&apos;vue-server-renderer/server-plugin&apos;);</span><br><span class="line">const base = require(&apos;./webpack.base.config&apos;);</span><br><span class="line"></span><br><span class="line">module.exports = merge(base, &#123;</span><br><span class="line">  target: &apos;node&apos;,</span><br><span class="line">   // 对 bundle renderer 提供 source map 支持</span><br><span class="line">  devtool: &apos;#source-map&apos;,</span><br><span class="line">  entry: &#123;</span><br><span class="line">    server: path.resolve(__dirname, &apos;../src/entry-server.js&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  externals: [nodeExternals()],     // 新增</span><br><span class="line">  output: &#123;</span><br><span class="line">    libraryTarget: &apos;commonjs2&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new VueSSRServerPlugin(),   // 这个要放到第一个写，否则 CopyWebpackPlugin 不起作用，原因还没查清楚</span><br><span class="line">    new HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: path.resolve(__dirname, &apos;../src/index.ssr.html&apos;),</span><br><span class="line">      filename: &apos;index.ssr.html&apos;,</span><br><span class="line">      files: &#123;</span><br><span class="line">        js: &apos;client.bundle.js&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      excludeChunks: [&apos;server&apos;]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>因为是服务端引用模块，所以不需要打包node_modules中的依赖，直接在代码中require引用就好，所以配置externals: [nodeExternals()]</code><br><code>两个配置文件会分别生成vue-ssr-client-manifest.json和vue-ssr-server-bundle.json。作为createBundleRenderer的参数</code><br><code>来看server.js:</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const serverBundle = require(path.resolve(__dirname, &apos;../dist/vue-ssr-server-bundle.json&apos;));</span><br><span class="line">const clientManifest = require(path.resolve(__dirname, &apos;../dist/vue-ssr-client-manifest.json&apos;));</span><br><span class="line">const template = fs.readFileSync(path.resolve(__dirname, &apos;../dist/index.ssr.html&apos;), &apos;utf-8&apos;);</span><br><span class="line"></span><br><span class="line">const renderer = createBundleRenderer(serverBundle, &#123;</span><br><span class="line">  runInNewContext: false,</span><br><span class="line">  template: template,</span><br><span class="line">  clientManifest: clientManifest</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><code>效果和第三步就是一样的啦</code></p>
<h2 id="4-5基于Vue-VueRouter-Vuex的SSR"><a href="#4-5基于Vue-VueRouter-Vuex的SSR" class="headerlink" title="4.5基于Vue + VueRouter + Vuex的SSR"></a>4.5基于Vue + VueRouter + Vuex的SSR</h2><p><code>在src下新增router目录:</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;;</span><br><span class="line">import Router from &apos;vue-router&apos;;</span><br><span class="line">import Bar from &apos;../components/Bar.vue&apos;;</span><br><span class="line"></span><br><span class="line">Vue.use(Router);</span><br><span class="line"></span><br><span class="line">function createRouter() &#123;</span><br><span class="line">  const routes = [</span><br><span class="line">    &#123;</span><br><span class="line">      path: &apos;/bar&apos;,</span><br><span class="line">      component: Bar</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: &apos;/foo&apos;,</span><br><span class="line">      component: () =&gt; import(&apos;../components/Foo.vue&apos;)   // 异步路由</span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  const router = new Router(&#123;</span><br><span class="line">    mode: &apos;history&apos;,</span><br><span class="line">    routes</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return router;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default createRouter;</span><br></pre></td></tr></table></figure>

<p><code>这里我们把Foo组件作为一个异步组件引入，做成按需加载。在app.js中引入router，并导出：</code><br><code>app.js</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;;</span><br><span class="line">import createStore from &apos;./store/store.js&apos;;</span><br><span class="line">import createRouter from &apos;./router&apos;;</span><br><span class="line">import App from &apos;./App.vue&apos;;</span><br><span class="line"></span><br><span class="line">export function createApp() &#123;</span><br><span class="line">  const store = createStore();</span><br><span class="line">  const router = createRouter();</span><br><span class="line"></span><br><span class="line">  const app = new Vue(&#123;</span><br><span class="line">    router,</span><br><span class="line">    store,</span><br><span class="line">    render: h =&gt; h(App)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  return &#123; app, store, router, App &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>修改App.vue引入路由组件：</code><br><code>App.vue</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-link to=&quot;/bar&quot;&gt;Goto Bar&lt;/router-link&gt; </span><br><span class="line">    &lt;router-link to=&quot;/foo&quot;&gt;Goto Foo&lt;/router-link&gt; </span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    console.log(&apos;App.vue beforeCreate&apos;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(&apos;App.vue created&apos;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  beforeMount() &#123;</span><br><span class="line">    console.log(&apos;App.vue beforeMount&apos;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(&apos;App.vue mounted&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>最重要的修改在entry-server.js中，</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createApp &#125; from &apos;./app.js&apos;;</span><br><span class="line"></span><br><span class="line">export default context =&gt; &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    const &#123; app, store, router, App &#125; = createApp();</span><br><span class="line"></span><br><span class="line">    router.push(context.url);</span><br><span class="line"></span><br><span class="line">    router.onReady(() =&gt; &#123;</span><br><span class="line">      const matchedComponents = router.getMatchedComponents();</span><br><span class="line"></span><br><span class="line">      console.log(context.url)</span><br><span class="line">      console.log(matchedComponents)</span><br><span class="line"></span><br><span class="line">      if (!matchedComponents.length) &#123;</span><br><span class="line">        return reject(&#123; code: 404 &#125;);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Promise.all(matchedComponents.map(component =&gt; &#123;</span><br><span class="line">        if (component.asyncData) &#123;</span><br><span class="line">          return component.asyncData(&#123; store &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)).then(() =&gt; &#123;</span><br><span class="line">        // 当使用 template 时，context.state 将作为 window.__INITIAL_STATE__ 状态，自动嵌入到最终的 HTML 中</span><br><span class="line">        context.state = store.state;</span><br><span class="line"></span><br><span class="line">        // 返回根组件</span><br><span class="line">        resolve(app);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, reject);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>这里前面提到的context就起了大作用，它将用户访问的url地址传进来，供vue-router使用。因为有异步组件，所以在router.onReady的成功回调中，去找该url路由所匹配到的组件，获取异步数据那一套还和前面的一样。于是，我们就完成了一个基本完整的基于Vue + VueRouter + VuexSSR配置</code><br><code>访问http://localhost:3000/bar：</code><br><img src="https://segmentfault.com/img/remote/1460000018556191" alt="hhg"></p>
<p>参考链接：<br>带你五步学会Vue SSR ：<a href="https://segmentfault.com/a/1190000016637877#articleHeader3" target="_blank" rel="noopener">https://segmentfault.com/a/1190000016637877#articleHeader3</a></p>
<div style="text-align:center;margin:30px;font-size:20px;border-radius:5px;border:3px solid #eee; cursor:pointer;" onclick="javascript:window.scrollTo(0, 0)">TOP</div>
            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/5146554.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://link.hhtjim.com/qq/001faIUs4M2zna.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
